{% extends "base.html" %}

{% block content %}

<style>
  /* non-active pills */
  #adminTabs .nav-link { background: #ffffff; color: #495057; }
  /* override each active pill */
  #tab-manage.active  { background: #0d6efd; color: #fff; }
  #tab-create.active  { background: #0d6efd; color: #fff; }
  #tab-edit.active    { background: #0d6efd; color: #fff; }
  #tab-delete.active  { background: #dc3545; color: #fff; }
</style>

<div class="container py-4">
  <div class="row">
    <div class="col">
      <h1 class="h3 mb-1">Org Control Panel</h1>
      <p class="text-muted">Welcome, {{ current_user.name }}!</p>
    </div>
    <div class="col">
      {# Flash messages #}
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% for category, msg in messages %}
          <div class= "mt-1 alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endwith %}
    </div>
  </div>
  
  
  <!-- Nav pills -->
  <ul class="nav nav-pills mb-4 mt-1" id="adminTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="tab-manage"
        data-bs-toggle="pill"
        data-bs-target="#pane-manage"
        type="button"
        role="tab"
      >
        <i class="bi bi-people me-1"></i>
        User List
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="tab-create"
        data-bs-toggle="pill"
        data-bs-target="#pane-create"
        type="button"
        role="tab"
      >
        <i class="bi bi-person-plus me-1"></i>
        Employee Schedule
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="tab-edit"
        data-bs-toggle="pill"
        data-bs-target="#pane-edit"
        type="button"
        role="tab"
      >
        <i class="bi bi-pencil-square"></i>
        Overview of hours worked
      </button>

<!-- Include the JavaScript file for the calendar functionality -->
	<script src="./script.js"></script>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="tab-delete"
        data-bs-toggle="pill"
        data-bs-target="#pane-delete"
        type="button"
        role="tab"
      >
        <i class="bi bi-trash"></i>
        Delete User
      </button>
    </li>
  </ul>


      <!-- Tab Content Panes -->
    <div
    class="tab-pane fade"
    id="pane-delete"
    role="tabpanel"
    aria-labelledby="tab-delete"
    >
    
<!-- Delete User pane -->
  <div class="tab-content" id="adminTabsContent">

      <div class="card shadow-sm p-4 mb-4">
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Select a user to delete:</label>
            <select id="userSelectDelete" class="form-select">
              <option value="">- Select User -</option>
              {% for u in users %}
                <option value="{{ u.id }}">
                  {{ u.name }} {{ u.lastname }}
                </option>
              {% endfor %}
            </select>
            <button id="btnDelete" type="submit" class="btn btn-danger" disabled>
              Delete User
            </button>
          </div>
        </div>
      </div>
  </div>
  
</div>    

    <!-- Manage Users Pane -->
    <div
      class="tab-pane fade show active"
      id="pane-manage"
      role="tabpanel"
      aria-labelledby="tab-manage"
    >
      <div class="card shadow-sm p-4">
        <table class="table table-striped mb-0">
          <thead>
            <tr>
              <th>Name</th><th>Lastname</th><th>Email</th><th>Hours</th>
            </tr>
          </thead>
          <tbody>
            {% for u in users %}
            <tr>
              <td>{{ u.name }}</td>
              <td>{{ u.lastname }}</td>
              <td>{{ u.email }}</td>
              <td> TEST </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- Overview of hours worked Pane -->
  <div class="tab-pane fade" id="pane-edit" role="tabpanel" aria-labelledby="tab-edit">
    <!-- Calendar application -->
	<div class="wrapper">
		<div class="container-calendar">
			<div id="left">
				<div id="event-section">
					<h3></h3>
          <div id="reminder-section">
					<h3>Overview</h3>
					<input type="date" id="eventDate">
					<input type="text"
						id="eventTitle"
						placeholder="Event Title">
					<input type="text"
						id="eventDescription"
						placeholder="Event Description">
					<button id="addEvent" onclick="addEvent()">
						Add
					</button>
				</div>
				

<!-- Calendar Table -->       
        <table class="table-calendar"
				id="calendar"
				data-lang="en">
				<thead id="thead-month"></thead>

<!-- JS for searchable dropdown menus -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    new Choices('#userSelectDelete', {
      searchEnabled: true,
      shouldSort: false,
      itemSelectText: ''
    });
  });
</script>
    
  {% endblock %}