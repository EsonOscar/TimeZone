{% extends "base.html" %}
{% block content %}

<div class="container py-5">
  <!--overscrift2-->
  <div class="text-center py-5">
    <h1 class="display-4">Medarbejder Check-in &amp; Check-out</h1>
    <p class="text-muted">Oversigt over dagens sessioner</p>
  </div>
</div>

<!--Vælg medarbejder og vis måned/uge skema-->
<div class="Crad shadow-sm mb-5">
  <div class="card-body">
    <h5 class="card-title">Se skema for medarbejder</h5>
    <form action="/stats" metod="get" class="row g-3 align-items-end">
      <div class="col-md-6">
        <label for="stats-employee" class="form-label">Vælg medarbejder</label>
        <select id="stats-employee" name="medarbejder" class="form-select" required>
          <option value="" disabled selected>-- Vælg medarbejder --</option>
          <!-- loop, opret en 'optioin' per medarbejder i listen employees-->
          {% for employee in employees %}
          <option value="{{ employee }}">{% if selected == employee %}selected{% endif %}>{{ employee }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-3">
        <button class="btn btn-primary w-100" type="submit">Vis skema</button>
      </div>
    </form>

    {% if selected %}
    <hr>
    <div class="row text-center gy-4">
    </div>
  </div>
</div>

<!-- Måned -->
  <div class="col-md-6">
    <div class="card border-info h-100">
      <div class="vard-body">
        <h6 class="card-title">Total timer denne måned</h6>
        <p class="display-5">{{ stats_month }} t</p>
      </div>
    </div>
  </div>
  <!-- Uge -->
   <div class="col-md-6">
    <div class="card boarder-warning h-100">
      <div class="card-body">
        <h6 class="card-title">Total timer denne uge</h6>
        <p class="display-5">{{ stats_week }} t</p>
      </div>
    </div>
   </div>
   {% endif %}

<!-- Check in -->
<form action="/checkin" method="post" class="row g-3 mb-4">
  <div class="col-auto">
    <div class="table-responsive">
   <table class="table table-striped">Organisation & Admin profile</table>
  </div>
  <!-- Dropdown menu til at vælge medarbejder, der skal checke ind-->
    <select name="medarbejder" class="form-control" required>
      <option value="" disabled selected>Vælg medarbejder</option>
      <!-- loop, opret en 'optioin' per medarbejder i listen employees-->
      {% for employee in employees %}
      <option value="{{ employee }}">{{ employee }}</option>
      {% endfor %}
    </select>
   </div>
  <div class="col-auto">
    <!-- Check in-->
    <button class="btn btn-success mt-4" type="submit">Check-in</button>
  </div>
</form>

<!-- Check out -->
<form action="/checkout" method="post" class="row g-3 mb-4">
  <div class="col-auto">
    <!-- samme dropdown som ovenfor-->
    <select name="medarbejder" class="form-control" required>
      <option value="" disabled selected>Vælg medarbejder</option>
      {% for employee in employees %}
      <option value="{{ employee }}">{{ employee }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <!-- knappen sender formularen afsted til checkout-->
    <button class="btn btn-danger" type="submit">Check-out</button>
  </div>
</form>

<!-- Session Table -->
<table class="table table-striped">
  <thead>
    <tr>
      <th>Medarbejder</th>
      <th>Check-in</th>
      <th>Check-out</th>
      <th>Varighed</th>
    </tr>
  </thead>
  <tbody>
    <!-- vis en række per session-->
    {% for s in sessions %}
    <tr>
      <td>{{ s.medarbejder }}</td>
      <td>{{ s.check_in }}</td>
      <td>{{ s.check_out }}</td>
      <td>{{ s.varighed }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}